defaultAirflowRepository: apache/airflow
defaultAirflowTag: "3.1.6"
airflowVersion: "3.1.6"

executor: "LocalExecutor"

postgresql:
  enabled: false

data:
  metadataConnection:
    protocol: postgresql
    host: postgres.data-storage.svc.cluster.local
    port: 5432
    db: ds_db
    user: mlops
    pass: qwklfqkwjd

redis:
  enabled: false

statsd:
  enabled: false

enableBuiltInSecretEnvVars:
  AIRFLOW__CORE__FERNET_KEY: false
  AIRFLOW__WEBSERVER__SECRET_KEY: false
  AIRFLOW__API__SECRET_KEY: false
  AIRFLOW__API_AUTH__JWT_SECRET: false
  AIRFLOW__CELERY__CELERY_RESULT_BACKEND: false
  AIRFLOW__CELERY__RESULT_BACKEND: false
  AIRFLOW__CELERY__BROKER_URL: false

env:
  - name: AIRFLOW__CORE__FERNET_KEY
    valueFrom:
      secretKeyRef:
        name: airflow-secrets
        key: fernet_key
  - name: AIRFLOW__WEBSERVER__SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: airflow-secrets
        key: webserver_secret_key
  - name: AIRFLOW__API__SECRET_KEY
    valueFrom:
      secretKeyRef:
        name: airflow-secrets
        key: api_secret_key
  - name: AIRFLOW__API_AUTH__JWT_SECRET
    valueFrom:
      secretKeyRef:
        name: airflow-secrets
        key: jwt_secret


ingress:
  enabled: true
  apiServer:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
    hosts:
      - name: airflow.group-jofz.dski23a.timebertt.dev
        tls:
          enabled: true
          secretName: airflow-tls
    path: "/"
    pathType: "ImplementationSpecific"

createUserJob:
  useHelmHooks: false
  applyCustomEnv: false

migrateDatabaseJob:
  useHelmHooks: false
  applyCustomEnv: false

config:
  core:
    load_examples: "True"

workers:
  persistence:
    enabled: false

triggerer:
  persistence:
    enabled: false